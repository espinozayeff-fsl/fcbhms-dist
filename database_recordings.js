!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=17)}({10:function(e,t,r){e.exports=function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,(function(e){return i(t[a][1][e]||e)}),c,c.exports,e,t,r,n)}return r[a].exports}for(var o=!1,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o={width:"100%",height:"100%"},a=function(e){return Number(e)==Number(e)},s="classList"in document.documentElement?function(e,t){e.classList.add(t)}:function(e,t){var r=e.getAttribute("class")||"";e.setAttribute("class",r+" "+t)},l=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config={},this._lastRepaint=null,this._maxElementHeight=e.getMaxBrowserHeight(),this.refresh(t,r);var i=this._config;!function e(){var t=n._getScrollPosition(),r=n._lastRepaint;if(n._renderAnimationFrame=window.requestAnimationFrame(e),t!==r){var o=r?t-r:0;if(!r||o<0||o>n._averageHeight){var a=n._renderChunk();n._lastRepaint=t,!1!==a&&"function"==typeof i.afterRender&&i.afterRender()}}}()}return n(e,null,[{key:"create",value:function(t,r){return new e(t,r)}},{key:"mergeStyle",value:function(e,t){for(var r in t)e.style[r]!==t[r]&&(e.style[r]=t[r])}},{key:"getMaxBrowserHeight",value:function(){var t=document.createElement("div"),r=document.createElement("div");e.mergeStyle(t,{position:"absolute",height:"1px",opacity:0}),e.mergeStyle(r,{height:"1e7px"}),t.appendChild(r),document.body.appendChild(t);var n=r.offsetHeight;return document.body.removeChild(t),n}}]),n(e,[{key:"destroy",value:function(){window.cancelAnimationFrame(this._renderAnimationFrame)}},{key:"refresh",value:function(t,r){var n;if(Object.assign(this._config,o,r),!t||1!==t.nodeType)throw new Error("HyperList requires a valid DOM Node container");this._element=t;var s=this._config,l=this._scroller||s.scroller||document.createElement(s.scrollerTagName||"tr");if("boolean"!=typeof s.useFragment&&(this._config.useFragment=!0),!s.generate)throw new Error("Missing required `generate` function");if(!a(s.total))throw new Error("Invalid required `total` value, expected number");if(!Array.isArray(s.itemHeight)&&!a(s.itemHeight))throw new Error("\n        Invalid required `itemHeight` value, expected number or array\n      ".trim());a(s.itemHeight)?this._itemHeights=Array(s.total).fill(s.itemHeight):this._itemHeights=s.itemHeight,Object.keys(o).filter((function(e){return e in s})).forEach((function(e){var t=s[e],r=a(t);if(t&&"string"!=typeof t&&"number"!=typeof t)throw new Error("Invalid optional `"+e+"`, expected string or number");r&&(s[e]=t+"px")}));var c=Boolean(s.horizontal),u=s[c?"width":"height"];if(u){var d=a(u),h=!d&&"%"===u.slice(-1),f=d?u:parseInt(u.replace(/px|%/,""),10),m=window[c?"innerWidth":"innerHeight"];this._containerSize=h?m*f/100:a(u)?u:f}var v=s.scrollContainer,p=s.itemHeight*s.total,g=this._maxElementHeight;p>g&&console.warn(["HyperList: The maximum element height",g+"px has","been exceeded; please reduce your item height."].join(" "));var y={width:""+s.width,height:v?p+"px":""+s.height,overflow:v?"none":"auto",position:"relative"};e.mergeStyle(t,y),v&&e.mergeStyle(s.scrollContainer,{overflow:"auto"});var b=(i(n={opacity:"0",position:"absolute"},c?"height":"width","1px"),i(n,c?"width":"height",p+"px"),n);e.mergeStyle(l,b),this._scroller||t.appendChild(l);var _=this._computeScrollPadding();this._scrollPaddingBottom=_.bottom,this._scrollPaddingTop=_.top,this._scroller=l,this._scrollHeight=this._computeScrollHeight(),this._itemPositions=this._itemPositions||Array(s.total).fill(0),this._computePositions(0),this._renderChunk(null!==this._lastRepaint),"function"==typeof s.afterRender&&s.afterRender()}},{key:"_getRow",value:function(t){var r=this._config,n=r.generate(t),o=n.height;if(void 0!==o&&a(o)?(n=n.element,o!==this._itemHeights[t]&&(this._itemHeights[t]=o,this._computePositions(t),this._scrollHeight=this._computeScrollHeight(t))):o=this._itemHeights[t],!n||1!==n.nodeType)throw new Error("Generator did not return a DOM Node for index: "+t);s(n,r.rowClassName||"vrow");var l=this._itemPositions[t]+this._scrollPaddingTop;return e.mergeStyle(n,i({position:"absolute"},r.horizontal?"left":"top",l+"px")),n}},{key:"_getScrollPosition",value:function(){var e=this._config;return"function"==typeof e.overrideScrollPosition?e.overrideScrollPosition():this._element[e.horizontal?"scrollLeft":"scrollTop"]}},{key:"_renderChunk",value:function(e){var t=this._config,r=this._element,n=this._getScrollPosition(),i=t.total,o=t.reverse?this._getReverseFrom(n):this._getFrom(n)-1;if((o<0||o-this._screenItemsLen<0)&&(o=0),!e&&this._lastFrom===o)return!1;this._lastFrom=o;var a=o+this._cachedItemsLen;(a>i||a+this._cachedItemsLen>i)&&(a=i);var s=t.useFragment?document.createDocumentFragment():[],l=this._scroller;s[t.useFragment?"appendChild":"push"](l);for(var c=o;c<a;c++){var u=this._getRow(c);s[t.useFragment?"appendChild":"push"](u)}if(t.applyPatch)return t.applyPatch(r,s);r.innerHTML="",r.appendChild(s)}},{key:"_computePositions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this._config,r=t.total,n=t.reverse;e<1&&!n&&(e=1);for(var i=e;i<r;i++)n?0===i?this._itemPositions[0]=this._scrollHeight-this._itemHeights[0]:this._itemPositions[i]=this._itemPositions[i-1]-this._itemHeights[i]:this._itemPositions[i]=this._itemHeights[i-1]+this._itemPositions[i-1]}},{key:"_computeScrollHeight",value:function(){var t,r=this,n=this._config,o=Boolean(n.horizontal),a=n.total,s=this._itemHeights.reduce((function(e,t){return e+t}),0)+this._scrollPaddingBottom+this._scrollPaddingTop;e.mergeStyle(this._scroller,(i(t={opacity:0,position:"absolute",top:"0px"},o?"height":"width","1px"),i(t,o?"width":"height",s+"px"),t));var l=this._itemHeights.slice(0).sort((function(e,t){return e-t})),c=Math.floor(a/2),u=a%2==0?(l[c]+l[c-1])/2:l[c],d=o?"clientWidth":"clientHeight",h=n.scrollContainer?n.scrollContainer:this._element,f=h[d]?h[d]:this._containerSize;return this._screenItemsLen=Math.ceil(f/u),this._containerSize=f,this._cachedItemsLen=Math.max(this._cachedItemsLen||0,3*this._screenItemsLen),this._averageHeight=u,n.reverse&&window.requestAnimationFrame((function(){o?r._element.scrollLeft=s:r._element.scrollTop=s})),s}},{key:"_computeScrollPadding",value:function(){var e=this._config,t=Boolean(e.horizontal),r=e.reverse,n=window.getComputedStyle(this._element),i=function(e){var t=n.getPropertyValue("padding-"+e);return parseInt(t,10)||0};return t&&r?{bottom:i("left"),top:i("right")}:t?{bottom:i("right"),top:i("left")}:r?{bottom:i("top"),top:i("bottom")}:{bottom:i("bottom"),top:i("top")}}},{key:"_getFrom",value:function(e){for(var t=0;this._itemPositions[t]<e;)t++;return t}},{key:"_getReverseFrom",value:function(e){for(var t=this._config.total-1;t>0&&this._itemPositions[t]<e+this._containerSize;)t--;return t}}]),e}();r.default=l,t.exports=r.default},{}]},{},[1])(1)},17:function(e,t,r){"use strict";r.r(t);var n=r(10),i=r.n(n);function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){h(o,n,i,a,s,"next",e)}function s(e){h(o,n,i,a,s,"throw",e)}a(void 0)}))}}FCBH.docReady(f(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new m,e.next=3,t.init();case 3:case"end":return e.stop()}}),e)}))));var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"fuseOptions",{shouldSort:!0,threshold:0,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["lang_name","country"]}),d(this,"results",[]),d(this,"fuse",null),d(this,"searchText",""),d(this,"filter","All"),d(this,"sort","language desc"),d(this,"viewDate",!0)}var t,r,n,l,c;return t=e,(r=[{key:"init",value:(c=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.createSearchListener(),this.avoidForm(),this.processFiltering(),this.processCheckbox(),e.next=6,this.fetchDatabase();case 6:this.results=e.sent,this.initializeResultList(this.results),this.fuse=this.createSearcher(this.results),this.appendSorting(),this.searchSortFilterAndRender(this.results);case 11:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"fetchDatabase",value:(l=f(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href.toLowerCase().includes("bible-brain-available-content")?"biblebrain_content":"bible_recordings",e.next=3,FCBH.axiosInstance.get("".concat(FCBH.BASE_URL,"resources/").concat(t,".json"));case 3:return r=e.sent,n=r.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{key:"createSearcher",value:function(e){return new Fuse(e,this.fuseOptions)}},{key:"search",value:function(e){return this.fuse.search(e)}},{key:"mapSearchToResults",value:function(e){return e.map((function(e){return e.item}))}},{key:"applyFilter",value:function(e,t){return"All"===e?t:t.filter((function(t){switch(e){case"Video":return t.video_date&&"NULL"!==t.video_date;case"Text":return t.text_date&&"NULL"!==t.text_date;case"Audio":return t.audio_date&&"NULL"!==t.audio_date;default:return!1}}))}},{key:"sorting",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this.sort)return e;var t=this.sort.split(" "),r=s(t,2),n=r[0],i=r[1],o=this.columnToKey(n),l=e.filter((function(e){return!e[o]||"NULL"===e[o]})),c=e.filter((function(e){return e[o]&&"NULL"!==e[o]})).sort((function(e,t){return"desc"===i?e[o]>t[o]?1:-1:e[o]>t[o]?-1:1}));return[].concat(a(c),a(l))}},{key:"columnToKey",value:function(e){switch(e){case"language":return"lang_name";case"country":return"country";case"video":return"video_date";case"text":return"text_date";case"audio":return"audio_date";default:return"lang_name"}}},{key:"createSearchListener",value:function(){var e=this;document.querySelector("#Search").addEventListener("keyup",(function(t){e.searchText=t.target.value,e.searchSortFilterAndRender()}))}},{key:"avoidForm",value:function(){document.querySelector("#wf-form-MP3-Downloads").addEventListener("submit",(function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}))}},{key:"processFiltering",value:function(){for(var e=this,t=document.querySelector("#format > div > div"),r=document.querySelector("#format nav");null==r?void 0:r.lastChild;)r.removeChild(r.lastChild);var n=["All","Audio","Video","Text"].map((function(r){var n=document.createElement("a");n.href="#",n.classList.add("dropdown-link","w-dropdown-link"),n.textContent=r,n.setAttribute("data-value",r);var i=function(){t.textContent=n.getAttribute("data-value"),t.dispatchEvent(new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!1})),t.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1})),e.filter=n.getAttribute("data-value"),e.searchSortFilterAndRender()};return n.addEventListener("touchstart",i),n.addEventListener("click",i),n}));r.append.apply(r,a(n)),t.textContent="All"}},{key:"processCheckbox",value:function(){var e=this,t=document.querySelector(".recordings-database__date-toggle .modal-window");t.addEventListener("click",(function(e){e.path.includes(t.querySelector(".modal__close"))&&document.querySelector(".modal-overlay").dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1})),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}));var r=document.querySelector("input[name='View-Date']");r.checked=!0,r.addEventListener("change",(function(){e.viewDate=r.checked,document.querySelectorAll('div[data-attr="dateNode"]').forEach((function(e){e.querySelector("span").style.display=r.checked?"inline":"none",e.querySelector("div").style.display=r.checked?"none":"block"}))}))}},{key:"searchSortFilterAndRender",value:function(){if(this.searchText){var e=this.sorting(this.applyFilter(this.filter,this.mapSearchToResults(this.search(this.searchText))));this.renderList(e)}else this.renderList(this.sorting(this.applyFilter(this.filter,this.results)))}},{key:"initializeResultList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(this.renderContainer=document.querySelector(".default-width-container.db-container");this.renderContainer.lastChild;)this.renderContainer.removeChild(this.renderContainer.lastChild);this.list=i.a.create(this.renderContainer,{itemHeight:100,total:e.length,generate:function(e){var t=document.createElement("div");return t.innerHTML="ITEM ".concat(e+1),t}})}},{key:"getNodeHeight",value:function(e){var t,r=e.cloneNode(!0);return r.style.cssText="position:fixed; top:-9999px; opacity:0;",document.body.appendChild(r),t=r.clientHeight,r.parentNode.removeChild(r),t}},{key:"renderList",value:function(e){var t=this;this.renderContainer.style.minHeight="800px";var r={itemHeight:100,total:e.length,generate:function(r){var n=document.createElement("div");return n.id="db-table-container",n.classList.add("w-layout-grid","recordings-db-grid"),n.style.width="100%",n.append.apply(n,a(t.createRow(e[r],r%2==0))),{element:n,height:t.getNodeHeight(n)}}};this.list.refresh(this.renderContainer,r)}},{key:"createRow",value:function(e,t){var r=this.createLanguageNode(e),n=this.createSimpleNode(e.country);n.classList.add("recordings-db-grid-text--country");var i=[r,n,this.createDateNode(e.audio_date),this.createDateNode(e.video_date),this.createDateNode(e.text_date)];return t||i.forEach((function(e){e.classList.add("recordings-db-grid-text--even")})),i}},{key:"createLanguageNode",value:function(e){var t=e.bible_id,r=e.lang_name,n=e.bible_name,i=e.country,o=document.createElement("a");o.href="https://live.bible.is/bible/"+t,o.target="_blank",o.title="".concat(r," | ").concat(n),o.textContent="".concat(r," "),o.classList.add("txt-sm","txt-sm--link","recordings-link");var a=this.makeTextNode(n);a.classList.add("language-version");var s=this.makeTextNode(i);s.classList.add("txt-bold","country-mobile");var l=this.makeContainer();return l.append(o,a,s),l}},{key:"createSimpleNode",value:function(e){var t=this.makeTextNode(e),r=this.makeContainer();return r.append(t),r}},{key:"createDateNode",value:function(e){var t=this.makeContainer();if(!e||"NULL"===e)return t;var r=this.makeTextNode(e);r.style.display=this.viewDate?"none":"block";var n=document.createElement("span");return n.innerHTML='\n    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t width="32px" height="32px" viewBox="0 0 78.369 78.369" style="enable-background:new 0 0 78.369 78.369;fill:#20b2aa"\n\t xml:space="preserve">\n      <g>\n        <path d="M78.049,19.015L29.458,67.606c-0.428,0.428-1.121,0.428-1.548,0L0.32,40.015c-0.427-0.426-0.427-1.119,0-1.547l6.704-6.704\n          c0.428-0.427,1.121-0.427,1.548,0l20.113,20.112l41.113-41.113c0.429-0.427,1.12-0.427,1.548,0l6.703,6.704\n          C78.477,17.894,78.477,18.586,78.049,19.015z"/>\n      </g>\n    </svg>\n',n.style.display=this.viewDate?"inline":"none",t.append(r,n),t.setAttribute("data-attr","dateNode"),t}},{key:"makeTextNode",value:function(e){var t=document.createElement("div");return t.classList.add("txt-xs"),t.textContent=e,t}},{key:"makeContainer",value:function(){var e=document.createElement("div");return e.classList.add("recordings-db-grid-text"),e}},{key:"appendSorting",value:function(){var e,t=this,r=document.querySelectorAll(".recordings-db-grid-title"),n=o(r);try{var i=function(){var n=e.value,i=n.querySelector("h5").textContent;"language"===i.toLowerCase()&&n.classList.add("recordings-db-grid-title--is-active"),n.addEventListener("click",(function(){t.onSortClicked(i,n,r)}))};for(n.s();!(e=n.n()).done;)i()}catch(e){n.e(e)}finally{n.f()}}},{key:"onSortClicked",value:function(e,t,r){var n="recordings-db-grid-title--is-active-toggle";t.classList.contains("recordings-db-grid-title--is-active")&&t.classList.toggle(n),t.classList.add("recordings-db-grid-title--is-active");var i,a=t.classList.contains(n)?"asc":"desc",s=o(r);try{for(s.s();!(i=s.n()).done;){var l=i.value;l!==t&&l.classList.remove("recordings-db-grid-title--is-active",n)}}catch(e){s.e(e)}finally{s.f()}this.sort="".concat(e.toLowerCase()," ").concat(a),this.searchSortFilterAndRender()}}])&&u(t.prototype,r),n&&u(t,n),e}()}});
//# sourceMappingURL=database_recordings.js.map