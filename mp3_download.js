!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=22)}({0:function(e,n){e.exports=function(e){var n=null==e?0:e.length;return n?e[n-1]:void 0}},1:function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return l}));var o=t(0),r=t.n(o);function i(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function a(e){var n=/(\d)(?=(\d\d\d)+(?!\d))/g;return e%1!=0?e.toFixed(2).replace(n,"$1,"):e.toString().replace(n,"$1,")}var l=function(e){var n=r()(window.location.href.split("/"));return{campaign:n,localForm:"".concat(e,"/").concat(n)}}},22:function(e,n,t){"use strict";t.r(n);var o=t(1);function r(e,n,t,o,r,i,a){try{var l=e[i](a),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(o,r)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(o,i){var a=e.apply(n,t);function l(e){r(a,o,i,l,c,"next",e)}function c(e){r(a,o,i,l,c,"throw",e)}l(void 0)}))}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=[],c=[],d=[];FCBH.docReady((function(){var e=document.getElementById("Search"),n=document.getElementById("language-search-dropdown"),t=new URLSearchParams(window.location.search),r=t.get("language")?Object(o.a)(t.get("language")):null,u=t.get("version"),s=function(e,t){!function(e,t,o){if(38!==e&&40!==e&&13!==e){var r,i,l=function(){var e=n;e.innerHTML="",e.style.display="none";var l=t.toLowerCase();if(r=0,l.length>0){e.style.display="block";var c=function(){if(r>7)return{v:{v:void 0}};var n=o[i];if(0==n.toLowerCase().search(l)){r++;var t=n.slice(0,l.length),a=n.slice(l.length),c=document.createElement("div");c.innerHTML="<strong>"+t+"</strong>"+a,c.onclick=function(){f(n)},e.appendChild(c)}};for(i=0;i<o.length;i++){var d=c();if("object"===a(d))return d.v}0==r&&(e.style.display="none",console.log("no matches"))}}();if("object"===a(l))l.v}}(e,t,l.map((function(e){return e.language_english})))},f=function(e){n.style.display="none",p(e,!1),g(e)};function p(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ENGESVN2DA",t=l.find((function(n){return n.language_english.toLowerCase()===(null==e?void 0:e.toLowerCase())}))||{language_english:"English",language_family_code:"ENG"};y(t,n)}function m(e){var t=n,o=t.querySelector(".isActive");if("block"===t.style.display)if("mouseover"===e.type&&"strong"!=e.target.nodeName.toLowerCase())o&&o.classList.remove("isActive"),(o=e.target).classList.add("isActive");else if("keyup"!=e.type||40!=e.which&&38!=e.which)"keyup"==e.type&&13==e.which&&o&&f(o.innerText);else{if(e.preventDefault(),o&&o.classList.remove("isActive"),40==e.which)o=o?o.nextElementSibling||o:t.firstChild;else if(38==e.which){if(!o)return;o=o.previousElementSibling||o}o.classList.add("isActive"),g(o.innerText)}}function g(n){e.value=n}function v(n){var t=document.querySelector("#mp3-version .w-dropdown-list").childNodes;if(E(t[0].id,t[0].textContent),e.value===r){var o=Array.from(t).filter((function(e){return e.id==n}));E(o[0].id,o[0].text)}}function h(){return(h=i(regeneratorRuntime.mark((function e(){var n,t,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FCBH.axiosInstance.get("".concat(FCBH.BASE_URL,"ci/index.php/dbp/get_language_rich"));case 3:for(n=e.sent,t=n.data.sort((function(e,n){return e.language_english<n.language_english?-1:1})),o=[],i=0;i<t.length;i++)o.indexOf(t[i].language_family_code)<0&&(o.push(t[i].language_family_code),l.push(t[i]));p(r,"ENGESVN2DA"),g(r||"English"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),S("An error occurred. Please try again later.");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function y(e,n){if(e){c=[],d=[],document.getElementById("searchDiv")&&(document.getElementById("searchDiv").style.display="none");for(var t=["".concat(FCBH.BASE_URL,"ci/index.php/dbp/get_volume_rich/")+e.language_family_code,"".concat(FCBH.BASE_URL,"ci/index.php/dbp/get_volume/")+e.language_family_code],o=0;o<t.length;o++)$.get({url:t[o],dataType:"json",success:function(e){if(e){for(var t=0;t<e.length;t++)d.indexOf(e[t].dam_id)<0&&(c.push(e[t]),d.push(e[t].dam_id));if(w(c,n),u&&v(u),e.length>0)_(n||c[0].dam_id)}},error:function(){S("An error occurred. Please try again later.")}})}}function w(e,n){for(var t=document.querySelector("#mp3-version .w-dropdown-list");t.firstChild;)t.removeChild(t.firstChild);if(e.length>0)for(var o=function(){i=e[r],a=i.dam_id.slice(6,7),l="","N"==a?l="New Testament":"O"==a?l="Old Testament":"P"==a&&(l="Partial");var o=document.createElement("A");o.href="#",o.classList.add("dropdown-link","w-dropdown-link");var c=document.createTextNode(i.volume_name+" Audio "+i.media_type+" "+l);o.id=i.dam_id,o.appendChild(c),o.addEventListener("click",(function(){E(o.id,o.textContent),b()})),t.appendChild(o),n&&n.toLowerCase()==i.dam_id.toLowerCase()&&(o.selected=!0,i.dam_id,E(o.id,o.textContent))},r=0;r<e.length;r++){var i,a,l;o()}else{var c=document.createElement("A");c.href="#",c.classList.add("dropdown-link","w-dropdown-link");var d=document.createTextNode("No versions available.");c.appendChild(d),c.id="noVersion",t.appendChild(c)}n||(E(t.firstElementChild.id,t.firstElementChild.textContent),b())}function b(){var n=document.querySelector("#mp3-version .w-dropdown-toggle div").dataset.value,t=window.location.protocol+"//"+window.location.host+window.location.pathname+"?language=".concat(e.value,"&version=").concat(n);window.history.pushState({path:t},"",t)}function E(e,n){if(C(),e){var t=document.querySelector("#w-dropdown-toggle-0 div");return t.setAttribute("data-value",e),t.textContent=n,t.style.overflow="hidden",t.dispatchEvent(new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!1})),t.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1})),void _(e)}}function _(e){if(e){var n=e.slice(0,7),t={};$.get({url:"".concat(FCBH.BASE_URL,"ci/index.php/dbp/get_audio/")+n.toUpperCase(),dataType:"json",success:function(e){if(e)for(var n=0;n<e.length;n++){if("DA"==e[n].dam_id.slice(-2)){t.publisherMark=e[n].mark;for(var o=0;o<e[n].organization.length;o++){var r=e[n].organization[o];"licensor"==r.organization_role&&(t.licensor=r.organization,t.licensorURL=r.organization_url),"holder"==r.organization_role&&(t.holderOrg=r.organization,t.holderURL=r.organization_url)}}"ET"==e[n].dam_id.slice(-2)&&(t.copyrightMark=e[n].mark,e[n].organization.length>0&&(t.copyrighter=e[n].organization[0].organization,t.copyrighterURL=e[n].organization[0].organization_url))}for(var i=document.querySelector("#wf-form-MP3-Downloads .txt-notice");i.lastChild;)i.removeChild(i.lastChild);if(function(e){for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}(t)){if(t.copyrightMark){var a=document.createElement("span");a.innerHTML=t.copyrightMark,a.classList.add("block"),i.appendChild(a)}if(t.copyrighter&&t.copyrighterURL){var l=document.createElement("span");l.innerHTML="<a href='"+t.copyrighterURL+"'>"+t.copyrighter+"</a>",l.classList.add("block"),i.appendChild(l)}if(t.licensor&&t.licensorURL){var c=document.createElement("span");c.innerHTML="<a href='"+t.licensorURL+"'> "+t.licensor+"</a>",c.classList.add("block"),i.appendChild(c)}if(t.holderOrg&&t.holderURL){var d=document.createElement("span");d.innerHTML="This Bible audio is brought to you by <a href='"+t.holderURL+"'>"+t.holderOrg+"</a>",d.classList.add("block"),i.appendChild(d)}if(t.publisherMark){var u=document.createElement("span");u.innerHTML=t.publisherMark,u.classList.add("block"),i.appendChild(u)}}else i.textContent="No copyright information available."},error:function(){}})}}function L(e){C();var n=document.getElementById("mp3-name").value,t=document.getElementById("Mp3-Last-Name").value,o=document.getElementById("mp3-email").value,r=!!document.getElementById("Receive Email Updates").checked;if(""!=n&&""!=o&&""!=t)if(x(n))if(x(t))if(o.trim().match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)){var i=document.querySelector("#w-dropdown-toggle-0 div").getAttribute("data-value");if("noVersion"!==i){var a=Array.from(document.querySelectorAll("#mp3-version .w-dropdown-list a")).findIndex((function(e){return e.id===i}));if(a<0)return console.log("COULDN'T FIND VERSION"),void S("An error occurred. Please try again later.");var l=c[a];if(!l)return console.log("VERSION IS NOT TRUE"),void S("An error occurred. Please try again later.");var d=document.querySelector(".w-form-done"),u=d.querySelector("a"),s=document.createElement("a");s.download=!0,s.href="https://fcbhabdm.s3.amazonaws.com/mp3audiobibles2/"+l.dam_id+"/"+l.dam_id+".zip",s.textContent="here",u.parentNode.replaceChild(s,u),d.style.display="block",s.click();var f={first_name:n,last_name:t,timestamp:Date.now().toString(),language:l.language_english.toString(),language_code:l.language_code.toString(),version_dam_id:l.dam_id.toString(),version_name:l.volume_name.toString(),email:o.toLowerCase(),recieve_emails:r};FCBH.firebaseDb.collection("audioBibleDownloads").add(f).then((function(e){console.log("DOCUMENT WAS SENT")})).catch((function(e){console.error("Error adding document: ",e),console.log("ERROR: DOCUMENT WAS NOT SENT")})),r||(document.getElementById("wf-form-MP3-Downloads").style.display="none",e.preventDefault()),window.scrollTo(0,0)}else S("Please select an audio bible version.")}else S("Email address is not valid.");else S("Last Name can only contain letters and spaces.");else S("First Name can only contain letters and spaces.");else S("Please fill out all form fields to download this Audio Bible.")}function S(e){var n=document.querySelector(".w-form-fail"),t=n.querySelector("div");n.style.display="block",t.innerHTML=e}function C(){document.querySelector(".w-form-fail").style.display="none"}function x(e){return!!e.trim().match(/^(\s|[A-Za-z])+$/)}e.onclick=e.onkeyup=function(e){s(e.which,e.target.value)},e.addEventListener("keyup",(function(e){return m(e)})),n.addEventListener("mouseover",(function(e){return m(e)})),e.addEventListener("keydown",(function(e){40!=e.which&&38!=e.which&&13!=e.which||e.preventDefault()})),function(){var e=window.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0){parseInt(e.substring(n+5,e.indexOf(".",n)),10)<10&&(document.getElementById("ie-error").style.display="block")}}(),function(){return h.apply(this,arguments)}().finally((function(){document.querySelectorAll(".w-dropdown-list").forEach((function(e){e.style["max-height"]="300px"}))})),document.getElementById("wf-form-MP3-Downloads").addEventListener("submit",L),document.querySelectorAll("#wf-form-MP3-Downloads input[type='submit']").forEach((function(e){e.addEventListener("click",L)}))}))}});
//# sourceMappingURL=mp3_download.js.map