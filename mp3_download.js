!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=72)}([function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c}));var r=n(0),o=n.n(r);function i(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function a(e){var t=/(\d)(?=(\d\d\d)+(?!\d))/g;return e%1!=0?e.toFixed(2).replace(t,"$1,"):e.toString().replace(t,"$1,")}var c=function(e){var t=o()(window.location.href.split("/"));return{campaign:t,localForm:"".concat(e,"/").concat(t)}}},,,,,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(18),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){var r=n(39),o=n(44);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(17),o=n(40),i=n(41),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},,,function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},,function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(10),o=n(19);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var r=n(8).Symbol;e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(1))},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},,function(e,t,n){var r=n(34),o=n(37),i=n(49),a=n(51),c=n(52),u=n(53),l=n(15),s=n(55),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(c(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||s(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},,,,,,,,,,,function(e,t,n){var r=n(15),o=n(35),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(36)(Object.keys,Object);e.exports=r},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(38),o=n(45),i=n(46),a=n(47),c=n(48),u=n(10),l=n(20),s=l(r),d=l(o),f=l(i),p=l(a),v=l(c),y=u;(r&&"[object DataView]"!=y(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=y(new o)||i&&"[object Promise]"!=y(i.resolve())||a&&"[object Set]"!=y(new a)||c&&"[object WeakMap]"!=y(new c))&&(y=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case s:return"[object DataView]";case d:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case v:return"[object WeakMap]"}return t}),e.exports=y},function(e,t,n){var r=n(9)(n(8),"DataView");e.exports=r},function(e,t,n){var r=n(16),o=n(42),i=n(19),a=n(20),c=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,s=u.toString,d=l.hasOwnProperty,f=RegExp("^"+s.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?f:c).test(a(e))}},function(e,t,n){var r=n(17),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[c]=n:delete e[c]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,o=n(43),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},function(e,t,n){var r=n(8)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(9)(n(8),"Map");e.exports=r},function(e,t,n){var r=n(9)(n(8),"Promise");e.exports=r},function(e,t,n){var r=n(9)(n(8),"Set");e.exports=r},function(e,t,n){var r=n(9)(n(8),"WeakMap");e.exports=r},function(e,t,n){var r=n(50),o=n(13),i=Object.prototype,a=i.hasOwnProperty,c=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!c.call(e,"callee")};e.exports=u},function(e,t,n){var r=n(10),o=n(13);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(16),o=n(21);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){(function(e){var r=n(8),o=n(54),i=t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,c=a&&a.exports===i?r.Buffer:void 0,u=(c?c.isBuffer:void 0)||o;e.exports=u}).call(this,n(7)(e))},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(56),o=n(57),i=n(58),a=i&&i.isTypedArray,c=a?o(a):r;e.exports=c},function(e,t,n){var r=n(10),o=n(21),i=n(13),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(18),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.process,c=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=c}).call(this,n(7)(e))},,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(23),i=n.n(o),a="e4a78850aaa914bea244b6482d6a0cc2";function c(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,u,"next",e)}function u(e){c(i,r,o,a,u,"throw",e)}a(void 0)}))}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=[],d=[],f=[];FCBH.docReady((function(){var e=document.getElementById("Search"),t=document.getElementById("language-search-dropdown"),n=new URLSearchParams(window.location.search),o=n.get("language")?Object(r.a)(n.get("language")):null,c=n.get("version");["Mp3-Last-Name","mp3-name"].forEach((function(e){document.getElementById(e).addEventListener("keyup",R)}));var p=function(e,n){!function(e,n,r){if(38!==e&&40!==e&&13!==e){var o,i,a=function(){var e=t;e.innerHTML="",e.style.display="none";var a=n.toLowerCase();if(o=0,a.length>0){e.style.display="block";var c=function(){if(o>7)return{v:{v:void 0}};var t=r[i];if(0==t.toLowerCase().search(a)){o++;var n=t.slice(0,a.length),c=t.slice(a.length),u=document.createElement("div");u.innerHTML="<strong>"+n+"</strong>"+c,u.onclick=function(){v(t)},e.appendChild(u)}};for(i=0;i<r.length;i++){var u=c();if("object"===l(u))return u.v}0==o&&(e.style.display="none",console.log("no matches"))}}();if("object"===l(a))a.v}}(e,n,s.map((function(e){return e.language_english})))},v=function(e){t.style.display="none",y(e,!1),g(e)};function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ENGESVN2DA",n=s.find((function(t){return t.language_english.toLowerCase()===(null==e?void 0:e.toLowerCase())}))||{language_english:"English",language_family_code:"ENG"};S(n,t)}function m(e){var n=t,r=n.querySelector(".isActive");if("block"===n.style.display)if("mouseover"===e.type&&"strong"!=e.target.nodeName.toLowerCase())r&&r.classList.remove("isActive"),(r=e.target).classList.add("isActive");else if("keyup"!=e.type||40!=e.which&&38!=e.which)"keyup"==e.type&&13==e.which&&r&&v(r.innerText);else{if(e.preventDefault(),r&&r.classList.remove("isActive"),40==e.which)r=r?r.nextElementSibling||r:n.firstChild;else if(38==e.which){if(!r)return;r=r.previousElementSibling||r}r.classList.add("isActive"),g(r.innerText)}}function g(t){e.value=t}function h(t){var n=document.querySelector("#mp3-version .w-dropdown-list").childNodes;if(C(n[0].id,n[0].textContent),e.value===o){var r=Array.from(n).filter((function(e){return e.id==t}));C(r[0].id,r[0].text)}}e.onclick=e.onkeyup=function(e){p(e.which,e.target.value)},e.addEventListener("keyup",(function(e){return m(e)})),t.addEventListener("mouseover",(function(e){return m(e)})),e.addEventListener("keydown",(function(e){40!=e.which&&38!=e.which&&13!=e.which||e.preventDefault()})),function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0){parseInt(e.substring(t+5,e.indexOf(".",t)),10)<10&&(document.getElementById("ie-error").style.display="block")}}();function b(){return(b=u(regeneratorRuntime.mark((function e(){var t,n,r,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://4.dbt.io","/api/languages?v=4&key=").concat(a,"&limit=150"),e.next=3,FCBH.axiosInstance.get(t);case 3:return n=e.sent,r=n.data,o=r.data,i=r.meta.pagination,e.next=9,Promise.all(w(t,i.total_pages));case 9:return c=e.sent,e.abrupt("return",[].concat(j(o),x(c)));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=2;r<t+1;r++)n.push(FCBH.axiosInstance.get("".concat(e,"&page=").concat(r)));return n}function x(e){return e.reduce((function(e,t){return e.concat(j(t.data.data))}),[])}function j(e){return e.map((function(e){var t;return{language_english:e.name,language_family_code:null===(t=e.iso)||void 0===t?void 0:t.toUpperCase(),language_name:e.autonym}}))}function E(){return(E=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t,y(o,"ENGESVN2DA"),g(o||"English");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return _.apply(this,arguments)}function _(){return(_=u(regeneratorRuntime.mark((function e(t,n){var r,o,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return d=[],f=[],M(),r="".concat("https://4.dbt.io","/library/volume?key=").concat(a,"&media=audio&status=live&delivery=digital_download&language_family_code=").concat(t.language_family_code,"&rich=1&v=3"),e.prev=6,e.next=9,FCBH.axiosInstance.get(r);case 9:if(o=e.sent,u=o.data,!i()(u)){e.next=13;break}return e.abrupt("return");case 13:for(l=0;l<u.length;l++)f.indexOf(u[l].dam_id)<0&&(d.push(u[l]),f.push(u[l].dam_id));k(d,n),c&&h(c),L(n||d[0].dam_id),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(6),console.error(e.t0),P("An error occurred. Please try again later.");case 24:case"end":return e.stop()}}),e,null,[[6,20]])})))).apply(this,arguments)}function k(e,t){for(var n=document.querySelector("#mp3-version .w-dropdown-list");n.firstChild;)n.removeChild(n.firstChild);if(e.length>0)for(var r=function(r){var o=e[r],i=o.dam_id.slice(6,7),a="";"N"==i?a="New Testament":"O"==i?a="Old Testament":"P"==i&&(a="Partial");var c=document.createElement("A");c.href="#",c.classList.add("dropdown-link","w-dropdown-link");var u=document.createTextNode(o.volume_name+" Audio "+o.media_type+" "+a);c.id=o.dam_id,c.appendChild(u),c.addEventListener("click",(function(){C(c.id,c.textContent,!0),O()})),n.appendChild(c),t&&t.toLowerCase()==o.dam_id.toLowerCase()&&(c.selected=!0,o.dam_id,C(c.id,c.textContent))},o=0;o<e.length;o++)r(o);else{var i=document.createElement("A");i.href="#",i.classList.add("dropdown-link","w-dropdown-link");var a=document.createTextNode("No versions available.");i.appendChild(a),i.id="noVersion",n.appendChild(i)}t||(C(n.firstElementChild.id,n.firstElementChild.textContent),O())}function O(){var t=document.querySelector("#mp3-version .w-dropdown-toggle div").dataset.value,n=window.location.protocol+"//"+window.location.host+window.location.pathname+"?language=".concat(e.value,"&version=").concat(t);window.history.pushState({path:n},"",n)}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(T(),e){var r=document.querySelector("#w-dropdown-toggle-0 div");if(r.setAttribute("data-value",e),r.textContent=t,r.style.overflow="hidden",n){var o=document.querySelector("#w-dropdown-toggle-0 div");o.dispatchEvent(new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!1})),o.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}))}L(e)}}function L(e){if(e){var t=e.slice(0,7),n={};$.get({url:"".concat(FCBH.BASE_URL,"ci/index.php/dbp/get_audio/")+t.toUpperCase(),dataType:"json",success:function(e){if(e)for(var t=0;t<e.length;t++){if("DA"==e[t].dam_id.slice(-2)){n.publisherMark=e[t].mark;for(var r=0;r<e[t].organization.length;r++){var o=e[t].organization[r];"licensor"==o.organization_role&&(n.licensor=o.organization,n.licensorURL=o.organization_url),"holder"==o.organization_role&&(n.holderOrg=o.organization,n.holderURL=o.organization_url)}}"ET"==e[t].dam_id.slice(-2)&&(n.copyrightMark=e[t].mark,e[t].organization.length>0&&(n.copyrighter=e[t].organization[0].organization,n.copyrighterURL=e[t].organization[0].organization_url))}for(var i=document.querySelector("#wf-form-MP3-Downloads .txt-notice");i.lastChild;)i.removeChild(i.lastChild);if(function(e){for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}(n)){if(n.copyrightMark){var a=document.createElement("span");a.innerHTML=n.copyrightMark,a.classList.add("block"),i.appendChild(a)}if(n.copyrighter&&n.copyrighterURL){var c=document.createElement("span");c.innerHTML="<a href='"+n.copyrighterURL+"'>"+n.copyrighter+"</a>",c.classList.add("block"),i.appendChild(c)}if(n.licensor&&n.licensorURL){var u=document.createElement("span");u.innerHTML="<a href='"+n.licensorURL+"'> "+n.licensor+"</a>",u.classList.add("block"),i.appendChild(u)}if(n.holderOrg&&n.holderURL){var l=document.createElement("span");l.innerHTML="This Bible audio is brought to you by <a href='"+n.holderURL+"'>"+n.holderOrg+"</a>",l.classList.add("block"),i.appendChild(l)}if(n.publisherMark){var s=document.createElement("span");s.innerHTML=n.publisherMark,s.classList.add("block"),i.appendChild(s)}}else i.textContent="No copyright information available."},error:function(){}})}}function A(e){T();var t=document.getElementById("mp3-name").value,n=document.getElementById("Mp3-Last-Name").value,r=document.getElementById("mp3-email").value,o=!!document.getElementById("Receive Email Updates").checked;if(console.log("Downloading",{name:t,lastName:n,email:r,recieveEmails:o}),""!=t&&""!=r&&""!=n)if(N(t))if(N(n))if(r.trim().match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)){var i=document.querySelector("#w-dropdown-toggle-0 div").getAttribute("data-value");if("noVersion"!==i){var a=Array.from(document.querySelectorAll("#mp3-version .w-dropdown-list a")).findIndex((function(e){return e.id===i}));if(a<0)return console.log("COULDN'T FIND VERSION"),void P("An error occurred. Please try again later.");var c=d[a];if(!c)return console.log("VERSION IS NOT TRUE"),void P("An error occurred. Please try again later.");var u=document.querySelector(".w-form-done"),l=u.querySelector("a"),s=document.createElement("a");s.download=!0,s.href=c.audio_zip_path,s.textContent="here",l.parentNode.replaceChild(s,l),u.style.display="block",s.click();var f={first_name:t,last_name:n,timestamp:Date.now().toString(),language:c.language_english.toString(),language_code:c.language_code.toString(),version_dam_id:c.dam_id.toString(),version_name:c.volume_name.toString(),email:r.toLowerCase(),recieve_emails:o};FCBH.firebaseDb.collection("audioBibleDownloads").add(f).then((function(e){console.log("DOCUMENT WAS SENT")})).catch((function(e){console.error("Error adding document: ",e),console.log("ERROR: DOCUMENT WAS NOT SENT")})),o||(document.getElementById("wf-form-MP3-Downloads").style.display="none",e.preventDefault()),window.scrollTo(0,0)}else P("Please select an audio bible version.")}else P("Email address is not valid.");else P("Last Name can only contain letters and spaces.");else P("First Name can only contain letters and spaces.");else P("Please fill out all form fields to download this Audio Bible.")}function M(){document.getElementById("searchDiv")&&(document.getElementById("searchDiv").style.display="none")}function P(e){var t=document.querySelector(".w-form-fail"),n=t.querySelector("div");t.style.display="block",n.innerHTML=e}function T(){document.querySelector(".w-form-fail").style.display="none"}function N(e){return!!e.trim().match(/^(\s|[A-Za-z])+$/)}function R(e){var t=e.target;N(t.value)||(t.value=t.value.replace(/[^a-zA-Z]/g,""))}(function(){return b.apply(this,arguments)})().then((function(e){return E.apply(this,arguments)})).catch(console.error).finally((function(){document.querySelectorAll(".w-dropdown-list").forEach((function(e){e.style["max-height"]="300px"}))})),document.getElementById("wf-form-MP3-Downloads").addEventListener("submit",A),document.querySelectorAll("#wf-form-MP3-Downloads input[type='submit']").forEach((function(e){e.addEventListener("click",A)}))}))}]);
//# sourceMappingURL=mp3_download.js.map
//# Version 1.2